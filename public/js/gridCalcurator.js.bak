//各種モジュールの読み込み
var fs=require('fs');
var jsonfile=require('jsonfile');

//gridの大きさ
const GRID_LENGTH=20;

//gridを読み込むパス
const GRID_PATH = __dirname+'/../json/grid.json'

//無限ループでマス目を移動させてその状態をJSONで書き込む
while(1){
	//gridの情報を取得する
	var grid= require(GRID_PATH);
	
	//gridの情報が存在しない場合に初期化する
	if(grid.gridLength == undefined){
		//大きさの初期化
		grid.gridLength = GRID_LENGTH;
		//ベストスコアの初期化
		grid.score=0;
		//グリッド配列の初期化
		grid.gridArray = new Array();
		grid.gridArray.length= GRID_LENGTH;
		grid.gridArray.fill(0);
		for(var i=0; i<GRID_LENGTH; i++){
			grid.gridArray[i]=new Array(GRID_LENGTH);
			grid.gridArray[i].length=GRID_LENGTH;
			grid.gridArray[i].fill(0);
		}
		var x= Math.floor(Math.random()*GRID_LENGTH);
		var y= Math.floor(Math.random()*GRID_LENGTH);
		grid.gridArray[x][y]=2;
	}
	
	
	
	//gridの情報を書き込む
	var data = jsonfile.writeFileSync(GRID_PATH,grid);
}